#include<reg52.h>
#define uchar unsigned char
#define uint unsigned int 
sbit rw=P3^6;//read write
sbit rd=P3^7;
sbit ce=P2^7;//chip enable
sbit cd=P2^6;//code data
sbit rst=P2^5;
void delay(uint z)
{
	uint i,j;
	for(i=z;i>0;i--)
		for(j=110;j>0;j--);
}
/******************************************************************************
*名称: WriteData()
*功能: 液晶写数据程序，dat为要写入的数据
******************************************************************************/
void WriteData(uchar dat)           //写数据    
{   ce=1;
     cd=0;
    rw=0;
     P2=dat; 
	ce=0;
     rw=1;
}   
/******************************************************************************
*名称: WriteComman()
*功能: 液晶写命令程序，cmd为要写入的命令
******************************************************************************/
void WriteCommand(uchar cmd)           //写命令    
{   ce=1;
     cd=1;
     rw=0;
     P2=cmd;
	ce=0;
     rw=1;
} 
/******************************************************************************
*名称: WriteDC()
*功能: 液晶写1数据1命令程序，dat为要写入的数据，cmd为要写入的命令
******************************************************************************/
void WriteDC(uchar dat,uchar cmd)      //写一个数据和一个指令 
{   
     WriteData(dat);   
     WriteCommand(cmd);   
} 
/******************************************************************************
*名称: WriteDDC()
*功能: 液晶写2数据1命令程序，data为要写入的数据，cmd为要写入的命令
******************************************************************************/
void WriteDDC(uchar data1, uchar data2, uchar cmd)   //写两个数据和一个指令 
{   
     WriteData(data1);         
     WriteData(data2);   
     WriteCommand(cmd);     
}   
/******************************************************************************
*名称: LCD_Init()
*功能: 液晶初始化程序
*      初始地址设置好后，在不同的地址段相同WriteData()输出不同
******************************************************************************/
void LCD_Init(void)         //液晶初始化 
{   
     uchar data1,data2,cmd;    
   		rw=1;
        
     /*********************设置文本显示*****************************/   
     data1 = 0x00;   
     data2 = 0x10;              //图形显示占用32*128=0xfff，故文本从0x1000开始
     cmd = 0x40;                //设置文本显示区首地址    
     WriteDDC(data1,data2,cmd);   
     data1 = 0x20;              //可以整屏显示
     data2 = 0x00;   
     cmd = 0x41;                //设置文本显示区宽度    
     WriteDDC(data1,data2,cmd);   
     data1 = 0x00;   
     data2 = 0x00;   
     cmd = 0x42;                //设置图形显示区首地址    
     WriteDDC(data1,data2,cmd);   
     data1 = 0x20;   
     data2 = 0x00;   
     cmd = 0x43;                //设置图形显示区宽度    
     WriteDDC(data1,data2,cmd); 
   cmd =0xa2;                 //设置光标形状 
   WriteCommand(cmd); 
     cmd = 0x80;                //显示方式设置
                              //启用外部字符发生器,显示方式是文本与图形与 
     WriteCommand(cmd); 
     cmd = 0x9e;                //启用光标闪烁,光标不显示,文本显示与图形显示    
     WriteCommand(cmd);   
}
uchar code Photo_code[] = {   
/*---- 图片文件来自：【C:\Documents and Settings\Administrator\桌面\0U95aA3-4.jpg】 ----*/
/*---- 图片宽度：96     图片高度：93 ----*/
/*---- 本数据文件建立日期：202009-11-12; 建立时间：20:13:38 ----*/
/*---- 本数据文件由PICtoCODE【图片数据生成器】V1.0自动生成！ ----*/
0x00, 0x00, 0x00, 0x00, 0x07, 0xf0, 0x0f, 0x80, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x1C, 0x00, 0x00, 0x38, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x01, 0x80, 0x00, 0x00, 0x01, 0x80, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x20, 0x03, 0x0D, 0x0C, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x60, 0x13, 0x0D, 0x0C, 0x60, 0x06, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x80, 0x33, 0x0F, 0x08, 0x6C, 0x00, 0x80, 0x00, 0x00, 
0x00, 0x00, 0x06, 0x00, 0x11, 0x0B, 0x08, 0x4C, 0x00, 0x40, 0x00, 0x00, 
0x00, 0x00, 0x0C, 0x00, 0x19, 0x09, 0x18, 0x08, 0x60, 0x20, 0x00, 0x00, 
0x00, 0x00, 0x10, 0x00, 0x0B, 0x00, 0x18, 0x30, 0x78, 0x08, 0x00, 0x00, 
0x00, 0x00, 0x20, 0x00, 0x0E, 0x00, 0x00, 0x20, 0xC8, 0x0C, 0x00, 0x00, 
0x00, 0x00, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xA0, 0x02, 0x00, 0x00, 
0x00, 0x00, 0x81, 0x00, 0x00, 0x00, 0x00, 0x01, 0x80, 0x01, 0x00, 0x00, 
0x00, 0x03, 0x01, 0xC0, 0x00, 0x60, 0x0A, 0x00, 0x70, 0xE0, 0x80, 0x00, 
0x00, 0x00, 0x01, 0x60, 0x03, 0x00, 0x00, 0x80, 0x21, 0xB0, 0x40, 0x00, 
0x00, 0x0C, 0x01, 0xB0, 0x00, 0x00, 0x00, 0x00, 0x03, 0xF0, 0x20, 0x00, 
0x00, 0x08, 0x20, 0x80, 0x00, 0x00, 0x00, 0x00, 0x02, 0xF0, 0x10, 0x00, 
0x00, 0x10, 0x30, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0x08, 0x00, 
0x00, 0x20, 0x18, 0x06, 0x00, 0x00, 0x00, 0x00, 0x40, 0xC3, 0x0C, 0x00, 
0x00, 0x01, 0x88, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x84, 0x00, 
0x00, 0x40, 0xC4, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x0A, 0xC0, 0x00, 
0x00, 0x80, 0x68, 0x20, 0x00, 0x00, 0x00, 0x00, 0x04, 0x1B, 0xC1, 0x00, 
0x01, 0x00, 0x30, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x01, 0x80, 
0x00, 0x08, 0x01, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00, 0x80, 
0x02, 0x0C, 0x00, 0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x80, 0x00, 0x00, 
0x02, 0x07, 0x02, 0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0x38, 0x40, 
0x04, 0x35, 0x80, 0x60, 0x03, 0x18, 0x70, 0x00, 0x00, 0x00, 0xE0, 0x40, 
0x00, 0x38, 0x04, 0x67, 0x33, 0x98, 0x70, 0x00, 0x00, 0x00, 0xC0, 0x20, 
0x00, 0x1E, 0x0C, 0x67, 0x73, 0x98, 0x3C, 0x1F, 0xFC, 0x00, 0x06, 0x00, 
0x08, 0x02, 0x1C, 0x67, 0x73, 0xB8, 0x1F, 0xFF, 0xFF, 0x08, 0x02, 0x10, 
0x18, 0x00, 0x0F, 0x7F, 0x3F, 0xF8, 0x0F, 0xFF, 0xFF, 0x80, 0x07, 0x10, 
0x11, 0xC0, 0x0F, 0xFC, 0x1F, 0xE0, 0x00, 0x00, 0x01, 0xC0, 0x1F, 0x98, 
0x11, 0xE0, 0x43, 0xF8, 0x37, 0x80, 0x00, 0x00, 0x01, 0xC0, 0x39, 0x88, 
0x00, 0x1C, 0x40, 0x60, 0xF3, 0x00, 0x01, 0xFF, 0xFF, 0x80, 0x00, 0x08, 
0x00, 0x08, 0x00, 0x60, 0xE1, 0x00, 0x07, 0xFF, 0xFF, 0x00, 0x00, 0x08, 
0x20, 0x00, 0x00, 0x61, 0xC3, 0x80, 0x0E, 0x00, 0x00, 0x01, 0x00, 0x00, 
0x22, 0x00, 0x00, 0xE1, 0xC3, 0xC0, 0x1C, 0x00, 0x00, 0x01, 0x00, 0xC0, 
0x43, 0x30, 0x0F, 0xFF, 0xFE, 0xFE, 0x1E, 0x3F, 0xF8, 0x00, 0x01, 0x84, 
0x61, 0xF1, 0x1F, 0x1F, 0xFD, 0x7E, 0x0F, 0xFF, 0xFE, 0x00, 0x0F, 0x04, 
0x67, 0xC0, 0x1C, 0xE1, 0xC3, 0x80, 0x07, 0xFF, 0xBF, 0x80, 0x0C, 0x64, 
0x46, 0x61, 0x00, 0xE0, 0xC3, 0xC0, 0x00, 0x00, 0x03, 0x80, 0x80, 0x00, 
0x40, 0x20, 0x01, 0xFD, 0xCF, 0xFE, 0x00, 0x00, 0x01, 0xC0, 0x80, 0x02, 
0x40, 0x00, 0x0F, 0xFF, 0xFE, 0xFE, 0x01, 0xFF, 0x81, 0xC0, 0x00, 0x02, 
0x40, 0x02, 0x1F, 0x1F, 0xF8, 0x00, 0x07, 0xFF, 0xE1, 0xC0, 0x00, 0x02, 
0x40, 0x00, 0x00, 0x00, 0xC0, 0x00, 0x0F, 0x07, 0xF1, 0xC0, 0x00, 0x02, 
0x40, 0x00, 0x00, 0x01, 0xC0, 0x00, 0x1F, 0x8F, 0x71, 0xC0, 0x00, 0x02, 
0x40, 0x02, 0x00, 0xFF, 0xFF, 0xE0, 0x1D, 0xDC, 0x71, 0xC0, 0x00, 0x02, 
0x40, 0x02, 0x00, 0xFF, 0xFF, 0xC0, 0x1C, 0xFC, 0x71, 0xC0, 0x00, 0x02, 
0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0xF0, 0xF1, 0xC0, 0x00, 0x02, 
0x40, 0x00, 0x07, 0xFF, 0xFF, 0xFC, 0x18, 0xF1, 0xF1, 0xC0, 0x00, 0x02, 
0x40, 0x00, 0x1F, 0xFF, 0xFF, 0xFE, 0x1B, 0xFF, 0xB1, 0xC0, 0x00, 0x02, 
0x40, 0x01, 0x1F, 0x81, 0xC0, 0x10, 0x1F, 0x9F, 0x31, 0xC0, 0x80, 0x00, 
0x40, 0x01, 0x00, 0x00, 0xC0, 0x00, 0x1F, 0x1E, 0x31, 0xC0, 0x00, 0x04, 
0x60, 0x00, 0x00, 0x00, 0xF8, 0x00, 0x1E, 0x3E, 0x31, 0xC0, 0x00, 0x04, 
0x20, 0x00, 0x00, 0x00, 0xFE, 0x00, 0x1C, 0x7F, 0x71, 0xC0, 0x00, 0x04, 
0x20, 0x00, 0x00, 0x00, 0x0E, 0x00, 0x1C, 0xF3, 0xF1, 0xC1, 0x00, 0x00, 
0x20, 0x00, 0x00, 0x00, 0x07, 0x00, 0x1D, 0xE3, 0xF1, 0xC1, 0x00, 0x00, 
0x00, 0x00, 0x80, 0x00, 0x07, 0x00, 0x0F, 0x81, 0xE1, 0xC0, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x07, 0x00, 0x0F, 0x81, 0xE1, 0xC2, 0x00, 0x08, 
0x10, 0x00, 0x00, 0x00, 0x07, 0x00, 0x07, 0xFF, 0xC1, 0xE0, 0x00, 0x08, 
0x10, 0x00, 0x00, 0x00, 0x0E, 0x00, 0x01, 0xFF, 0x00, 0xE0, 0x00, 0x08, 
0x18, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x00, 0xE4, 0x00, 0x10, 
0x08, 0x00, 0x20, 0x00, 0xFC, 0x00, 0x00, 0x00, 0x00, 0x70, 0x00, 0x10, 
0x08, 0x00, 0x00, 0x3F, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 
0x00, 0x00, 0x01, 0xFF, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x70, 0x00, 0x20, 
0x00, 0x00, 0x07, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x20, 
0x06, 0x00, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x40, 
0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 
0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 
0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 
0x00, 0x80, 0x00, 0x40, 0x00, 0x00, 0x00, 0x00, 0x04, 0x00, 0x01, 0x00, 
0x00, 0xC0, 0x30, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x02, 0x00, 
0x00, 0x40, 0x6C, 0x08, 0x00, 0x00, 0x00, 0x00, 0x10, 0x1F, 0x06, 0x00, 
0x00, 0x20, 0x8D, 0x00, 0x00, 0x20, 0x04, 0x00, 0x01, 0x97, 0xC4, 0x00, 
0x00, 0x10, 0x3B, 0x00, 0x00, 0x60, 0x6E, 0x00, 0x80, 0xFF, 0x88, 0x00, 
0x00, 0x08, 0x3D, 0x00, 0x80, 0x62, 0xEF, 0x01, 0x00, 0xE7, 0x10, 0x00, 
0x00, 0x0C, 0x4C, 0x00, 0x00, 0x46, 0x70, 0x00, 0x00, 0x70, 0x30, 0x00, 
0x00, 0x04, 0x08, 0x06, 0x06, 0x00, 0x00, 0x40, 0x00, 0x30, 0x40, 0x00, 
0x00, 0x00, 0x08, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x70, 0x30, 0x80, 0x00, 
0x00, 0x01, 0x00, 0x3F, 0x80, 0x00, 0x00, 0x00, 0xD8, 0x01, 0x00, 0x00, 
0x00, 0x00, 0x80, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x7A, 0x01, 0x00, 0x00, 
0x00, 0x00, 0x40, 0xFE, 0x00, 0x00, 0x00, 0x00, 0xF6, 0x04, 0x00, 0x00, 
0x00, 0x00, 0x30, 0x7F, 0x00, 0x18, 0x03, 0x40, 0xF8, 0x0C, 0x00, 0x00, 
0x00, 0x00, 0x0C, 0x0C, 0x03, 0xF6, 0x27, 0xC0, 0x78, 0x30, 0x00, 0x00, 
0x00, 0x00, 0x06, 0x04, 0x03, 0xFE, 0x07, 0xC0, 0xC0, 0x60, 0x00, 0x00, 
0x00, 0x00, 0x01, 0x87, 0x03, 0xF6, 0x53, 0xC0, 0x01, 0x80, 0x00, 0x00, 
0x00, 0x00, 0x00, 0xC0, 0x00, 0x3C, 0x13, 0xC0, 0x06, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x18, 0x00, 0xC4, 0x17, 0x60, 0x18, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x0E, 0x00, 0x84, 0x35, 0xE0, 0x60, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x02, 0xC0, 0x04, 0x20, 0x00, 0x80, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x78, 0x00, 0x00, 0x1C, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x0E, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x17, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 
/*---- 图片文件来自：【C:\Documents and Settings\Administrator\桌面\0710212117359106xhdx.jpg】 ----*/
/*---- 图片宽度：96     图片高度：27 ----*/
/*---- 本数据文件建立日期：202009-11-12; 建立时间：20:30:35 ----*/
/*---- 本数据文件由PICtoCODE【图片数据生成器】V1.0自动生成！ ----*/
0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x01, 0x0E, 
0x00, 0x00, 0x00, 0x00, 0x20, 0x60, 0x00, 0x00, 0x00, 0x00, 0x07, 0xE6, 
0x00, 0x00, 0x00, 0x00, 0x30, 0xC0, 0x00, 0x06, 0x00, 0x00, 0x07, 0xCC, 
0x00, 0x00, 0x00, 0x00, 0x16, 0x80, 0x00, 0x07, 0x00, 0x00, 0x21, 0x88, 
0x00, 0x00, 0x0C, 0x00, 0x3D, 0x00, 0x00, 0x03, 0x00, 0x00, 0x33, 0x18, 
0x00, 0x03, 0xFC, 0x00, 0x7B, 0x48, 0x00, 0x03, 0x00, 0x00, 0x1E, 0x30, 
0x00, 0x7C, 0x70, 0x00, 0x3B, 0xF8, 0x00, 0x03, 0x00, 0x00, 0x9F, 0x70, 
0x07, 0xE0, 0x00, 0x00, 0x11, 0xF8, 0x00, 0x03, 0x80, 0x00, 0xED, 0x00, 
0x07, 0xB0, 0x00, 0x00, 0x01, 0xF2, 0x00, 0x03, 0x30, 0x00, 0xC0, 0x60, 
0x00, 0x1C, 0x00, 0x00, 0x01, 0xFE, 0x00, 0x03, 0x70, 0x00, 0x01, 0x60, 
0x00, 0x1C, 0x70, 0x00, 0x0F, 0xFC, 0x00, 0x03, 0xE0, 0x00, 0x04, 0x60, 
0x00, 0x0E, 0xF0, 0x00, 0x7F, 0xF8, 0x00, 0x03, 0xC0, 0x00, 0x08, 0x80, 
0x02, 0x1F, 0xF0, 0x00, 0x7B, 0xE0, 0x00, 0x07, 0x80, 0x00, 0x30, 0x3C, 
0x02, 0x1E, 0xF0, 0x00, 0xF7, 0xF0, 0x00, 0x1F, 0x00, 0x00, 0xC0, 0xFC, 
0x03, 0x3D, 0xE0, 0x00, 0x7B, 0xF8, 0x00, 0xFF, 0x00, 0x03, 0x83, 0xFC, 
0x01, 0xF9, 0xC0, 0x00, 0x3B, 0x38, 0x03, 0xC7, 0x00, 0x1F, 0x8F, 0xF0, 
0x03, 0xBF, 0x80, 0x00, 0xE3, 0xF0, 0x1F, 0x8E, 0x00, 0x1E, 0x3F, 0xC0, 
0x03, 0xFF, 0x80, 0x03, 0x87, 0x80, 0x0F, 0x0E, 0x10, 0x00, 0x0F, 0x00, 
0x29, 0xFF, 0x00, 0x07, 0x0F, 0x00, 0x00, 0x1C, 0x18, 0x00, 0x03, 0x00, 
0x60, 0x60, 0x00, 0x1C, 0x03, 0x00, 0x00, 0x30, 0x1C, 0x00, 0x03, 0x00, 
0x60, 0x7C, 0x00, 0x78, 0x01, 0x00, 0x00, 0xE0, 0x0C, 0x00, 0x03, 0x00, 
0x70, 0x1C, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 
0x30, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x00, 
0x10, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00, 
};
#define CG_length 352
uchar code CG_code[] = {   
0x00,0x00,0x7F,0x03,0x03,0x23,0x3F,0x33,0x33,0x33,0x36,0x38,0x30,0x3F,0x30,0x20,
      0x00,0x02,0xFF,0x60,0x60,0x62,0xFF,0x66,0x66,0x7E,0x3E,0x06,0x06,0xFE,0x06,0x04,//"西",
0x04,0x06,0x0C,0x08,0x1C,0x3C,0x4C,0x0D,0x0C,0x09,0x01,0x7F,0x01,0x01,0x01,0x01,
      0x40,0x68,0x6C,0x78,0x70,0xE0,0xE4,0x64,0x7E,0xBC,0x82,0xFF,0x80,0x80,0x80,0x80,//"华",
0x01,0x01,0x01,0x01,0x01,0x3F,0x01,0x01,0x03,0x03,0x06,0x06,0x0C,0x18,0x30,0x40,
      0x00,0x80,0x80,0x80,0x84,0xFE,0x80,0xC0,0x40,0x60,0x20,0x30,0x18,0x0E,0x07,0x02,//"大",
0x09,0x0D,0x14,0x3F,0x70,0x20,0x07,0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x03,0x00,
      0x10,0x98,0xB2,0xFF,0x06,0x24,0xF0,0x60,0xC0,0xC4,0xFE,0xC0,0xC0,0xC0,0xC0,0x80,//"学",
0x08,0x06,0x12,0x1F,0x19,0x19,0x1F,0x19,0x19,0x1F,0x01,0x7F,0x01,0x01,0x01,0x01,
      0x30,0x60,0xC8,0xFC,0x98,0x98,0xF8,0x98,0x98,0xF8,0x84,0xFE,0x80,0x80,0x80,0x80,//"单",
0x00,0x10,0x18,0x18,0x1F,0x18,0x18,0x18,0x1F,0x18,0x18,0x30,0x30,0x20,0x40,0x00,
      0x40,0x60,0x60,0x62,0xFF,0x00,0x00,0x10,0xF8,0x30,0x30,0x30,0x30,0x30,0x30,0x30,//"片",
0x10,0x19,0x19,0x19,0x7F,0x19,0x39,0x3D,0x3F,0x5B,0x59,0x19,0x19,0x1B,0x1A,0x14,
      0x00,0x08,0xFC,0x98,0x98,0x98,0x98,0x98,0x98,0x98,0x98,0x98,0x1A,0x1A,0x1F,0x0E,//"机",
0x00,0x03,0x1C,0x06,0x12,0x3F,0x73,0x2F,0x03,0x07,0x07,0x0D,0x08,0x11,0x23,0x0C,
      0x18,0xFC,0x90,0xD8,0xB2,0xFF,0x06,0xFC,0x08,0xFC,0x18,0xB0,0xE0,0xB8,0x1F,0x06,//"爱",
0x08,0x0C,0x0C,0x18,0x1A,0x7F,0x1B,0x1B,0x36,0x36,0x1C,0x0E,0x1B,0x33,0x22,0x40,
      0x02,0xFF,0x06,0x0C,0x10,0x18,0x1A,0xFF,0x18,0x18,0x18,0x18,0x18,0x58,0x38,0x10,//"好",
0x01,0x01,0x1F,0x01,0x01,0x01,0x7F,0x03,0x0F,0x1C,0x6C,0x0F,0x0C,0x0C,0x0F,0x08,
      0x80,0xA4,0xF6,0x8C,0x98,0xE2,0xFF,0x08,0xFC,0x18,0x18,0xF8,0x18,0x18,0xF8,0x10,// "者",
   0x30,0x30,0x31,0x33,0x36,0x3C,0x38,0xFF,0xFF,0x38,0x3C,0x36,0x33,0x31,0x30,0x30,
      0x70,0xF0,0xF0,0x30,0x30,0x30,0x30,0xFF,0xFF,0x30,0x30,0x30,0x30,0xF0,0xF0,0x70 //图标
   } ;
/******************************************************************************
*名称: Write_Str()
*功能: 液晶写字符程序，显示ASCII字符，row为行(0~15),rol为列(0~29)
*      显示ASCII字符为8*8点阵（屏为240*128点阵）
******************************************************************************/
void Write_Str(uchar row,uchar rol,uchar str)
{
uint addres;
uchar data1,data2;
addres=row*32+rol+0x1000;
data2=addres>>8;
data1=addres;
WriteDDC(data1,data2,0x24);
WriteCommand(0xb0);
WriteData(str);
WriteCommand(0xb2);
}
/******************************************************************************
*名称: Write_Photo()
*功能: 液晶画图程序，row为图片开始行(0~127)，rol为图片开始列(0~29)，
*      width为图片长（单位Bit）,deep 为图片宽（单位bit）
******************************************************************************/
void Write_Photo(uchar row,uchar rol,uchar width,uchar deep)
{
uint address,Photolength,i;
uchar j,data1,data2,cmd;
Photolength=width*deep;
address = row*32+rol;
data1 = address;                 //取地址低八位    
data2 = address>>8;                //取地址高八位    
cmd = 0x24; 
WriteDDC(data1,data2,cmd);
WriteCommand(0xb0);//自动写模式
for(i=0;i<Photolength;i++)
{
WriteData(Photo_code[i]);
j++;
if(j==width)
{ 
WriteCommand(0xb2);           //退出自动写模式
    address=address+32;
    data1 = address;                 //取地址低八位    
    data2 = address>>8;                //取地址高八位    
    cmd = 0x24; 
    WriteDDC(data1,data2,cmd);
    j=0;
    WriteCommand(0xb0);         //进入自动写模式
    }
   }
   WriteCommand(0xb2);
}
/******************************************************************************
*名称: Write_Chinese()
*功能: 液晶写汉字程序，row为汉字开始行，rol为汉字开始列，Chinese为汉字字符串在
*      CGRAM中的初地址 ，length为汉字字符串的长度，（一个16*16点阵的汉字长度为4）
******************************************************************************/
void SetCGRAM(void)   
{       
     uchar data1,data2,cmd;   
     uint i; 
     data1 = 0x03;   
     data2 = 0x00;                  //设置偏移地址寄存器 
     cmd = 0x22;                       
     WriteDDC(data1,data2,cmd);   
     data1 = 0x00;   
     data2 = 0x1c;   
     cmd = 0x24;                   //设置地址指针    
     WriteDDC(data1,data2,cmd);   
     cmd = 0xb0;                   //进入自动写模式    
     WriteCommand(cmd);   
     for (i = 0;i < CG_length; ++i)   
     {      
         WriteData(CG_code[i]);     
     }   
     cmd = 0xb2;                   //退出自动写模式    
     WriteCommand(cmd);       
}
/******************************************************************************
*名称: Write_Chinese()
*功能: 液晶写汉字程序，row为汉字开始行(0~15)，rol为汉字开始列(0~29)，
*      Chinese为汉字字符串在CGRAM中的初地址 ，
*      length为汉字字符串的长度，（一个16*16点阵的汉字长度为4）
******************************************************************************/
void Write_Chinese(uchar row,uchar rol,uchar Chinese,uchar length) // 0x80 0x82 0x84 86     
{                                                                    // 0x81 0x83 0x85 87    
     uchar data1,data2,cmd;   
     uchar i;   
     uint address;   
     /****************先写汉字上半部分*********************************/   
     address = row * 32 + rol+0x1000;   
     data1 = address;                 //取地址低八位    
     data2 = address>>8;                //取地址高八位    
     cmd = 0x24;                      //设置地址指针,字符显示首位置    
     WriteDDC(data1,data2,cmd);   
     cmd = 0xb0;                      //进去自动写模式    
     WriteCommand(cmd); 
   for(i=0;i<length;i++)
   {
    WriteData(Chinese+i);
    i++;
   }
   cmd = 0xb2;                     //退出自动写模式    
     WriteCommand(cmd);    
   /****************再写汉字下半部分*********************************/   
     address = address+32;   
     data1 = address;                 //取地址低八位    
     data2 = address>>8;                //取地址高八位    
     cmd = 0x24;                      //设置地址指针,字符显示首位置    
     WriteDDC(data1,data2,cmd);   
     cmd = 0xb0;                      //进去自动写模式    
     WriteCommand(cmd); 
   for(i=1;i<length;i++)
   {
    WriteData(Chinese+i);
    i++;
   }
   cmd = 0xb2;                     //退出自动写模式    
     WriteCommand(cmd); 
}
/******************************************************************************
*名称: main()
*功能: 主函数，画图，写汉字，写汉字前应设置CGRAM
******************************************************************************/
void main(void)   
{   
//   rst=0;
//   delay(10);
//   rst=1;
   LCD_Init();
   SetCGRAM();
   Write_Photo(1,2,12,120);
   Write_Chinese(3,19,0x80,16) ;
   Write_Chinese(6,17,0x90,24) ;
   Write_Chinese(9,22,0xa8,4) ;
   while(1);
}

