#include <reg52.h>
#include<reg52.h>
#define uchar unsigned char
#define uint unsigned int 
sbit ce=P2^7;
sbit rw=P3^6;
sbit rd=P3^7;
sbit cd=P2^6;
sbit rst=P2^5;
uint address;
uchar data1,data2,cmd;
uchar code table[]={/*--  文字:  我  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x04,0x40,0x0E,0x50,0x78,0x48,0x08,0x48,0x08,0x40,0xFF,0xFE,0x08,0x40,0x08,0x44,
0x0A,0x44,0x0C,0x48,0x18,0x30,0x68,0x22,0x08,0x52,0x08,0x8A,0x2B,0x06,0x10,0x02,

/*--  文字:  人  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x02,0x80,0x02,0x80,
0x04,0x40,0x04,0x40,0x08,0x20,0x08,0x20,0x10,0x10,0x20,0x08,0x40,0x04,0x80,0x02,

/*--  文字:  有  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x02,0x00,0x02,0x00,0xFF,0xFE,0x04,0x00,0x04,0x00,0x0F,0xF0,0x08,0x10,0x18,0x10,
0x2F,0xF0,0x48,0x10,0x88,0x10,0x0F,0xF0,0x08,0x10,0x08,0x10,0x08,0x50,0x08,0x20,

/*--  文字:  的  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x10,0x40,0x10,0x40,0x20,0x40,0x7E,0x7C,0x42,0x84,0x42,0x84,0x43,0x04,0x42,0x44,
0x7E,0x24,0x42,0x24,0x42,0x04,0x42,0x04,0x42,0x04,0x7E,0x04,0x42,0x28,0x00,0x10,

/*--  文字:  和  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x04,0x00,0x0E,0x00,0x78,0x00,0x08,0x7C,0x08,0x44,0xFF,0x44,0x08,0x44,0x18,0x44,
0x1C,0x44,0x2A,0x44,0x2A,0x44,0x48,0x44,0x88,0x7C,0x08,0x44,0x08,0x00,0x08,0x00,

/*--  文字:  主  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x02,0x00,0x01,0x00,0x00,0x00,0x7F,0xFC,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,
0x3F,0xF8,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0xFF,0xFE,0x00,0x00,

/*--  文字:  产  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x02,0x00,0x01,0x00,0x7F,0xFC,0x00,0x00,0x08,0x20,0x04,0x20,0x04,0x40,0x3F,0xFE,
0x20,0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x40,0x00,0x40,0x00,0x80,0x00,

/*--  文字:  不  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x00,0x7F,0xFC,0x00,0x80,0x00,0x80,0x01,0x00,0x01,0x00,0x03,0x40,0x05,0x20,
0x09,0x10,0x11,0x08,0x21,0x04,0x41,0x04,0x81,0x00,0x01,0x00,0x01,0x00,0x01,0x00,

/*--  文字:  为  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x01,0x00,0x21,0x00,0x11,0x00,0x11,0x00,0x01,0x00,0x7F,0xF8,0x02,0x08,0x02,0x08,
0x02,0x88,0x04,0x48,0x04,0x48,0x08,0x08,0x10,0x08,0x20,0x08,0x40,0x50,0x80,0x20,

/*--  文字:  这  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x80,0x20,0x40,0x10,0x40,0x17,0xFC,0x00,0x10,0x02,0x10,0xF1,0x20,0x10,0xA0,
0x10,0x40,0x10,0xA0,0x11,0x10,0x12,0x08,0x14,0x08,0x28,0x00,0x47,0xFE,0x00,0x00,

/*--  文字:  工  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x00,0x00,0x00,0x7F,0xFC,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,
0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0xFF,0xFE,0x00,0x00,0x00,0x00,

/*--  文字:  要  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x00,0x7F,0xFC,0x04,0x40,0x04,0x40,0x3F,0xF8,0x24,0x48,0x24,0x48,0x3F,0xF8,
0x02,0x00,0x7F,0xFC,0x04,0x20,0x08,0x40,0x1C,0x80,0x03,0x80,0x06,0x70,0x38,0x08,

/*--  文字:  在  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x02,0x00,0x02,0x00,0x04,0x00,0xFF,0xFE,0x08,0x00,0x08,0x40,0x10,0x40,0x30,0x40,
0x57,0xFC,0x90,0x40,0x10,0x40,0x10,0x40,0x10,0x40,0x10,0x40,0x1F,0xFE,0x10,0x00,

/*--  文字:  地  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x10,0x20,0x10,0x20,0x10,0x20,0x11,0x20,0x11,0x2C,0xFD,0x34,0x11,0x64,0x13,0xA4,
0x11,0x24,0x11,0x34,0x11,0x28,0x1D,0x22,0xE1,0x22,0x41,0x02,0x00,0xFE,0x00,0x00,

/*--  文字:  一  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFE,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

/*--  文字:  上  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x02,0x00,0x02,0x00,0x02,0x00,0x02,0x00,0x02,0x00,0x02,0x00,0x03,0xF8,0x02,0x00,
0x02,0x00,0x02,0x00,0x02,0x00,0x02,0x00,0x02,0x00,0x02,0x00,0xFF,0xFE,0x00,0x00,

/*--  文字:  是  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x1F,0xF0,0x10,0x10,0x10,0x10,0x1F,0xF0,0x10,0x10,0x10,0x10,0x1F,0xF0,0x00,0x00,
0xFF,0xFE,0x01,0x00,0x11,0x00,0x11,0xF8,0x11,0x00,0x29,0x00,0x45,0x00,0x83,0xFE,

/*--  文字:  中  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x3F,0xF8,0x21,0x08,0x21,0x08,0x21,0x08,
0x21,0x08,0x21,0x08,0x3F,0xF8,0x21,0x08,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,

/*--  文字:  国  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x00,0x7F,0xFC,0x40,0x04,0x40,0x04,0x5F,0xF4,0x41,0x04,0x41,0x04,0x4F,0xE4,
0x41,0x04,0x41,0x44,0x41,0x24,0x5F,0xF4,0x40,0x04,0x40,0x04,0x7F,0xFC,0x40,0x04,

/*--  文字:  经  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x10,0x00,0x11,0xFC,0x20,0x08,0x24,0x10,0x44,0x30,0xF8,0x48,0x10,0x84,0x23,0x02,
0x40,0x00,0xFD,0xFC,0x40,0x20,0x00,0x20,0x1C,0x20,0xE0,0x20,0x43,0xFE,0x00,0x00,

/*--  文字:  以  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x10,0x04,0x10,0x22,0x10,0x21,0x10,0x21,0x10,0x20,0x10,0x20,0x10,0x20,0x20,
0x20,0x20,0x20,0x20,0x24,0x40,0x28,0x50,0x30,0x88,0x21,0x04,0x02,0x02,0x04,0x02,

/*--  文字:  发  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x01,0x00,0x11,0x10,0x11,0x08,0x22,0x00,0x3F,0xFC,0x02,0x00,0x04,0x00,0x07,0xF8,
0x0A,0x08,0x09,0x08,0x11,0x10,0x10,0xA0,0x20,0x40,0x40,0xA0,0x03,0x18,0x1C,0x06,

/*--  文字:  了  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x00,0x7F,0xF8,0x00,0x10,0x00,0x20,0x00,0x40,0x01,0x80,0x01,0x00,0x01,0x00,
0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,0x05,0x00,0x02,0x00,

/*--  文字:  民  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x00,0x3F,0xF8,0x20,0x08,0x20,0x08,0x20,0x08,0x3F,0xF8,0x20,0x80,0x20,0x80,
0x3F,0xFC,0x20,0x80,0x20,0x40,0x20,0x40,0x24,0x24,0x28,0x14,0x30,0x0C,0x20,0x04,

/*--  文字:  同  --*/
/*--  宋体12;  此字体下对应的点阵为：宽x高=16x16   --*/
0x00,0x00,0x3F,0xFC,0x20,0x04,0x20,0x04,0x2F,0xF4,0x20,0x04,0x20,0x04,0x27,0xE4,
0x24,0x24,0x24,0x24,0x24,0x24,0x27,0xE4,0x24,0x24,0x20,0x04,0x20,0x14,0x20,0x08,

};
void clear();
void delay(uint z)		//毫秒级延时
{
	uint i,j;
	for(i=z;i>0;i--)
		for(j=110;j>0;j--);
}
void delayus(uint z)	//微秒级延时
{
	while(z--);
}
void WriteData(uchar dat)           //写数据    
{    ce=1;
     cd=0;
    rw=0;
     P0=dat; 
   delayus(10);

	ce=0;
     rw=1;
}   
void WriteCommand(uchar cmd)           //写命令    
{   ce=1;
     cd=1;
     rw=0;
     P0=cmd;
delayus(10);
	ce=0;
     rw=1;
} 
void WriteDC(uchar dat,uchar cmd)      //写一个数据和一个指令 
{   
     WriteData(dat);   
     WriteCommand(cmd);   
} 
void WriteDDC(uchar data1, uchar data2, uchar cmd)   //写两个数据和一个指令 
{   
     WriteData(data1);         
     WriteData(data2);   
     WriteCommand(cmd);     
}   
void clear()	//清屏
{
	uint i;
	WriteCommand(0xb2);
	data1 = 0x00;                 //取地址低八位    
	data2 = 0x00;                //取地址高八位    
	cmd = 0x24; 
	WriteDDC(data1,data2,cmd);
	WriteCommand(0xb0);//自动写模式
	for(i=0;i<5000;i++)
	{
		WriteData(0x00);
	}
		WriteCommand(0xb2);
}
void LCD_Init(void)	//液晶初始化
{   
     uchar data1,data2,cmd;    
   		rw=1;
        
     
     data1 = 0x00;   
     data2 = 0x10;              //图形显示占用32*128=0xfff，故文本从0x1000开始
     cmd = 0x40;                //设置文本显示区首地址    
     WriteDDC(data1,data2,cmd);   
     data1 = 0x20;              //可以整屏显示
     data2 = 0x00;   
     cmd = 0x41;                //设置文本显示区宽度    
     WriteDDC(data1,data2,cmd);   
     data1 = 0x00;   
     data2 = 0x00;   
     cmd = 0x42;                //设置图形显示区首地址    
     WriteDDC(data1,data2,cmd);   
     data1 = 0x1e;   
     data2 = 0x00;   
     cmd = 0x43;                //设置图形显示区宽度    
     WriteDDC(data1,data2,cmd); 
   cmd =0xa2;                 //设置光标形状 
   WriteCommand(cmd); 
     cmd = 0x80;                //显示方式设置
                              //启用外部字符发生器,显示方式是文本与图形与 
     WriteCommand(cmd); 
     cmd = 0x9e;                //启用光标闪烁,光标不显示,文本显示与图形显示    
     WriteCommand(cmd);   
}



void writecgram()
{
	uint i,k;
	WriteDDC(0x03,0x00,0x22);
	WriteDDC(0x00,0x1c,0x24);
	for(i=0;i<88;i++)
	{
		WriteCommand(0xb0);
		for(k=0;k<8;k++)
		{
			WriteData(table[i*16+k*2]);
		}
		for(k=0;k<8;k++)
		{
			WriteData(table[i*16+k*2+1]);
		}
		WriteCommand(0xb2);	
	}	
}
void display()
{
	uint i,j,k,add1,add;
	add1=0x1000;
	for(i=0;i<23;i++)
	{
		add=add1+i*2;
		data1=add;
		data2=add>>8;
		cmd=0x24;
		WriteDDC(data1,data2,cmd);
		WriteCommand(0xb0);
		WriteData(0x80+4*(k*11+i));
		WriteData(0x81+4*(k*11+i));
        WriteCommand(0xb2);
	    add=add+32;
	    data1=add;
	    data2=add>>8;
		cmd=0x24;
		WriteDDC(data1,data2,cmd);
     	WriteCommand(0xb0);
		
		WriteData(0x82+4*(k*11+i));
		WriteData(0x83+4*(k*11+i));
		WriteCommand(0xb2);	
		delay(1000);	
	}
	add1=0x1000+(k+1)*64;
}
void main()
{
	rst=0;
	delay(5);
	rst=1;;
	LCD_Init();
	clear();
	writecgram();
	clear();
	display();
	while(1);
}